(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(14),c=t.n(a),u=(t(20),t(2)),l=function(e){return o.a.createElement("div",null,e.person.name," ",e.person.number," ",o.a.createElement("button",{onClick:e.deletePerson},"delete"))},s=t(3),i=t.n(s),m="/api/persons",f=function(){return i.a.get(m).then((function(e){return e.data}))},d=function(e){return i.a.post(m,e).then((function(e){return e.data}))},g=function(e,n){return i.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return i.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},b=function(e){var n=e.persons.filter((function(n){return n.name.toLowerCase().startsWith(e.newSearch.toLowerCase())}));return o.a.createElement(o.a.Fragment,null,n.map((function(n){return o.a.createElement(l,{key:n.name,person:n,deletePerson:function(){return function(n){console.log("Id to delete is ",n);var t=e.persons.find((function(e){return e.id===n}));window.confirm("Delete ".concat(t.name,"?"))&&p(n).then((function(t){console.log(t),e.setPersons(e.persons.filter((function(e){return e.id!==n})))}))}(n.id)}})})))},h=function(e){var n=Object(r.useState)(""),t=Object(u.a)(n,2),a=t[0],c=t[1];return o.a.createElement("div",null,"search: ",o.a.createElement("input",{value:a,onChange:function(n){c(n.target.value),e.setNewSearch(n.target.value)}}))},E=t(4),v=function(e){var n=Object(r.useState)(""),t=Object(u.a)(n,2),a=t[0],c=t[1],l=Object(r.useState)(""),s=Object(u.a)(l,2),i=s[0],m=s[1];return o.a.createElement("form",{onSubmit:function(n){if(n.preventDefault(),-1!==e.persons.findIndex((function(e){return e.name===a}))){if(window.confirm("".concat(a," is already added to phonebook, replace the old number with a new one?"))){console.log(a,"  hhe ",i);var t=e.persons.find((function(e){return e.name===a}));console.log(t);var r=Object(E.a)(Object(E.a)({},t),{},{number:i});console.log(r),g(t.id,r).then((function(n){console.log(n);var t=e.persons.map((function(e){return e.name!==a?e:n}));console.log(t),e.copyPers(t),e.setErrorMessage("Changed number for ".concat(a)),setTimeout((function(){e.setErrorMessage(null)}),5e3),c(""),m("")})).catch((function(n){e.setNegErrorMessage("Information of ".concat(a," is removed from server")),setTimeout((function(){e.setNegErrorMessage(null)}),5e3),e.copyPers(e.persons.filter((function(e){return e.name!==a})))}))}c(""),m("")}else{d({name:a,number:i}).then((function(n){e.copyPers(e.persons.concat(n)),e.setErrorMessage("Added number for ".concat(a)),setTimeout((function(){e.setErrorMessage(null)}),5e3),c(""),m("")}))}}},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:a,onChange:function(e){c(e.target.value)}})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:i,onChange:function(e){m(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},j=function(e){var n=e.message;return null===n?null:o.a.createElement("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderTadius:5,padding:10,marginBottom:10}},n)},O=function(e){var n=e.message;return null===n?null:o.a.createElement("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderTadius:5,padding:10,marginBottom:10}},n)},S=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),l=Object(u.a)(c,2),s=l[0],i=l[1],m=Object(r.useState)(null),d=Object(u.a)(m,2),g=d[0],p=d[1],E=Object(r.useState)(null),S=Object(u.a)(E,2),w=S[0],y=S[1];return Object(r.useEffect)((function(){console.log("effect"),f().then((function(e){console.log("promise fulfilled"),a(e)}))}),[]),console.log("render",t.length,"persons"),o.a.createElement("div",null,o.a.createElement(j,{message:g}),o.a.createElement(O,{message:w}),o.a.createElement("h2",null,"Phonebook"),o.a.createElement(h,{setNewSearch:i}),o.a.createElement("h2",null,"Add new"),o.a.createElement(v,{persons:t,copyPers:function(e){console.log(e),a(e)},setErrorMessage:p,setNegErrorMessage:y}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(b,{persons:t,newSearch:s,setPersons:a}))};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.48210836.chunk.js.map